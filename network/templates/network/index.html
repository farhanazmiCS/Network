{% extends "network/layout.html" %}
{% load static %}

{% block body %}

    <div id="newsfeed-all">
        <div id="make-new-post" class="container">
            <form id="new-post" method="post" action="/allposts">
                {% csrf_token %}
                <div class="textarea">
                    <textarea class="form-control" id="text" name="textfield" rows="3" required></textarea>
                </div>
                <div id="submit" class="d-grid gap-2">
                    <button class="btn btn-primary" type="submit">Post</button>
                </div>
            </form>
        </div>
        <div id="feed-tab">
            <button id="all1" class="tab">Popular</button> |
            <button id="following1" class="tab">Following</button>
        </div>

        <div id="postsAll" class="container">
        {% for post in page %}
            <div id="{{ post.id }}"class="post-element">
                <h5>{{ post.op }}</h5>
                <p>{{ post.post }}</p>
                <p>{{ post.timestamp }}</p>
                <div class="total-likes-{{ post.id }}">
                    <i id="like-{{ post.id }}" class="far fa-thumbs-up"></i> {{ post.totalLikes }}
                </div>
                <hr>
            </div>
        {% endfor %}
        </div>

        <nav id="pagination" aria-label="Page navigation">
            <ul class="pagination">
                {% if page.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="{% url 'index' %}?page=1" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="{% url 'index' %}?page={{ page.previous_page_number }}" aria-label="Previous">
                        <span aria-hidden="true">&#60; Prev</span>
                    </a>
                </li>
                <li class="page-item"><a id="current-page" class="page-link" href="{% url 'index' %}?page={{ page.previous_page_number }}">{{ page_num_before }}</a></li>
                {% endif %}
                
                <li class="page-item active"><a id="current-page" class="page-link">{{ page_num }}</a></li>
                
                {% if page.has_next %}
                <li class="page-item"><a id="current-page" class="page-link" href="{% url 'index' %}?page={{ page.next_page_number }}">{{ page_num_after }}</a></li>
                <li class="page-item">
                    <a class="page-link" href="{% url 'index' %}?page={{ page.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">Next &#62;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="{% url 'index' %}?page={{ last_page }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                {% endif %}

            </ul>
        </nav>
    </div>
    <div id="newsfeed-following">
        <div id="make-new-post" class="container">
            <form id="new-post" method="post" action="/posts">
                {% csrf_token %}
                <div class="textarea">
                    <textarea class="form-control" id="text" name="textfield" rows="3"></textarea>
                </div>
                <div id="submit" class="d-grid gap-2">
                    <button class="btn btn-primary" type="submit">Post</button>
                </div>
            </form>
        </div>

        <div id="feed-tab">
            <button id="all2" class="tab">Popular</button> | 
            <button id="following2" class="tab">Following</button>
        </div>

        <div id="postsFollowing" class="container">
        </div>

    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'network/network.js' %}"></script>
{% endblock %}